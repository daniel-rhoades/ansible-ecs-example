#
# Provision an AWS VPC to host the web infrastructure
#

- include: aws/tasks/vpc.yml

- name: ECS Example | Provision networking | VPC | Store the subnet information
  set_fact:
    vpc_id: "{{ vpc.vpc_id }}"
    subnet_ecscluster_1_id: "{{ vpc.subnets[0].id }}"
    subnet_ecscluster_2_id: "{{ vpc.subnets[1].id }}"

- include: aws/tasks/ec2_securitygroups.yml